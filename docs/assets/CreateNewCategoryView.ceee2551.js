import{d as b,u as w,r as i,o as l,c as u,b as t,e as o,t as p,f as _,j as d,C as h,k as F,s as B}from"./index.8b156eb2.js";import{u as S}from"./category.0e82e4f4.js";const P={class:"flex flex-col items-center justify-center h-auto w-full md:w-[80vw] py-10"},j=t("div",{class:"mt-4 mb-4 text-center text-4xl"},"\u5275\u5EFA\u5206\u985E",-1),R={class:"rounded-md border-t-[1px] bg-[#ecf0f3] shadow-lg shadow-[#474444]"},L={class:"flex h-auto w-[70vw] flex-col px-6 md:w-[40vw]"},U={class:"mt-2"},$=t("div",{class:"mb-2 text-xl font-extrabold"},"\u5206\u985E\u540D\u7A31",-1),N={key:0,class:"mt-2 mb-2 text-red-500"},V={class:"mt-2"},q=t("div",{class:"mb-2 text-xl font-extrabold"},"\u5206\u985E\u63CF\u8FF0",-1),z={key:0,class:"mt-2 mb-2 text-red-500"},H={class:"mt-2"},I=t("div",{class:"mb-2 text-xl font-extrabold"},"\u5206\u985E\u5716\u7247",-1),M={key:0,class:"mt-2 mb-2 text-red-500"},O={class:""},T=["onDrop","onDragover"],G=t("span",{class:"absolute mx-auto text-[10vw] text-gray-400 opacity-30"},[t("i",{class:"fa-regular fa-image"})],-1),J=t("span",{class:"ml-2 text-2xl"},"\u9EDE\u64CA\u9078\u64C7\u5716\u7247\u6216\u62D6\u66F3\u5716\u7247\u81F3\u6B64",-1),K={key:1,class:"mb-2 text-xl font-extrabold"},Q=t("img",{class:"w-full max-h-48",id:"id_imgPreview",alt:""},null,-1),W={class:"flex justify-between my-4"},X=b({__name:"formCreateCategory",setup(y){w();const f=S();let c=i(),v=i(),x=i(),m=i(null),r=i(null);const k=i();async function C(){const s=c.value.files[0],e=document.querySelector("#id_imgPreview");e.src=URL.createObjectURL(s)||"";let n=await g(s);m.value=n}async function D(s){s.preventDefault(),c.value.value="";const e=s.dataTransfer.files[0],n=document.querySelector("#id_imgPreview");n.src=URL.createObjectURL(e)||"";let a=await g(e);m.value=a}function A(s){s.preventDefault(),s.stopPropagation()}function g(s){return new Promise((e,n)=>{let a=new FileReader;a.onload=()=>{e(a.result)},a.onerror=n,a.readAsDataURL(s)})}async function E(){r.value=null;let s={name:v.value.value,description:x.value.value,img:m.value},e=await f.store(s);if(e.errors){window.scrollTo({top:0,behavior:"smooth"}),r.value=e.errors;return}if(console.log(e),e.errors&&e.errors.img){console.log("err");return}h.push({name:"admin.categories"})}return(s,e)=>(l(),u("div",P,[j,t("div",R,[t("form",L,[t("div",U,[$,o(r)&&o(r).name?(l(),u("div",N,"*"+p(o(r)&&o(r).name[0]||""),1)):_("",!0),t("input",{ref_key:"input_name",ref:v,class:"text-xl h-[60px] w-full rounded-2xl bg-[#ecf0f3] px-2 shadow-inset1 outline-none focus:ring-4 focus:ring-purple-500",name:"name",type:"text",placeholder:"\u8ACB\u8F38\u5165\u5206\u985E\u540D\u7A31"},null,512)]),t("div",V,[q,o(r)&&o(r).description?(l(),u("div",z,"*"+p(o(r)&&o(r).description[0]||""),1)):_("",!0),t("textarea",{ref_key:"textarea_description",ref:x,class:"h-[30vh] w-full resize-none rounded-2xl bg-[#ecf0f3] px-4 py-4 text-xl shadow-inset1 outline-none focus:ring-4 focus:ring-purple-500",name:"description",cols:"50",rows:"30"},null,512)]),t("div",H,[I,o(r)&&o(r).img?(l(),u("div",M,"*"+p(o(r)&&o(r).img[0]||""),1)):_("",!0),t("div",O,[t("label",{ref_key:"div_drop_area",ref:k,onDrop:d(D,["prevent"]),onDragenter:e[1]||(e[1]=d(()=>{},["prevent"])),onDragover:d(A,["prevent"]),class:"relative flex justify-center items-center h-[30vh] mb-4 border-[8px] border-[#a2a0a0] border-dashed z-0 cursor-pointer"},[t("input",{ref_key:"input_img",ref:c,onChange:e[0]||(e[0]=n=>C()),type:"file",class:"hidden",name:"img"},null,544),G,J],40,T)]),o(m)?(l(),u("div",K,"\u5716\u7247\u9810\u89BD")):_("",!0),Q]),t("div",W,[t("button",{onClick:e[2]||(e[2]=d(n=>E(),["prevent"])),class:"h-[7vh] w-[40%] rounded-md border-2 border-gray-300 bg-green-800 text-2xl text-white outline-none hover:bg-green-400 hover:text-black"},"\u5EFA\u7ACB"),t("button",{onClick:e[3]||(e[3]=d(n=>o(h).go(-1),["prevent"])),class:"h-[7vh] w-[40%] rounded-md border-2 border-gray-300 bg-gray-600 text-2xl text-white outline-none hover:bg-slate-400 hover:text-black"},"\u53D6\u6D88")])])])]))}}),ee=b({__name:"CreateNewCategoryView",setup(y){const f=w();return F(async()=>{await f.validataAdminState()}),(c,v)=>(l(),B(X))}});export{ee as default};
